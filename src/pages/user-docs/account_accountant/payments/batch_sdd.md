# SEPA Direct Debit (SDD) customer payments

SEPA (Single Euro Payments Area) is a payment-integration initiative of
the European Union that facilitates standardized and simplified
electronic payments in euros across participating countries. With **SEPA
Direct Debit** (SDD), customers sign a mandate that authorizes you to
collect future payments from their bank accounts. This is particularly
useful for recurring payments based on a
`subscription `.

You can record customer `SDD (SEPA Direct Debit)` mandates in Odoo and generate XML files listing payments to
be collected with the mandates.
`Uploading these files to your bank ` instructs them to collect these payments from your
customers.

::: tip

\- `SDD (SEPA Direct Debit)` is supported
by all SEPA countries, which includes the 27 member states of the
European Union as well as additional countries. - [List of all SEPA
countries](https://www.europeanpaymentscouncil.eu/document-library/other/epc-list-sepa-scheme-countries).
::::

## Configuration 

### Creditor identifier

To enable `SDD (SEPA Direct Debit)` for
customer payments, go to `Accounting ‣ Configuration ‣
Settings`, scroll to the
`Customer Payments` section, enable
`SEPA Direct Debit
(SDD)`, and click
`Save`. Then, scroll to the
`Customer Payments` section again,
set the company\'s `Creditor Identifier`, and click `Save`.

::: tip

The creditor identifier is provided by your bank or the authority
responsible for delivering them in your country. For testing purposes,
you can use the test creditor identifier
[DE98ZZZ09999999999].
::::

### PAIN file version

By default, the
`SEPA-compliant XML files ` generated by Odoo use the
`SDD (SEPA Direct Debit)`
**PAIN.008.001.02** format. If your bank requires the updated 2023
version, go to
`Accounting ‣ Configuration ‣ Journals` and select the `Bank` journal. Then, in the
`Incoming Payments` tab, set the
`SEPA
Pain version` field to
`Updated 2023 (Pain 008.001.08)`.


## SEPA Direct Debit Mandates 

An `SDD (SEPA Direct Debit)` mandate is a
legal document authorizing a company to debit funds from a customer\'s
bank account. It includes key information, such as the customer\'s name
and IBAN, the mandate\'s start and end date, and the mandate\'s unique
identifier. The mandate form must be filled in and signed by the
customer.

### Creating mandates

To create an `SDD (SEPA Direct Debit)`
mandate:

1.  Go to
    `Accounting ‣ Customers ‣ Direct Debit Mandates`.
2.  Click `New` and fill out the
    fields.
3.  Click `Send & Print`, optionally
    edit the email, then click `Send & Print` to email the mandate form to the customer for
    signature.
4.  Click `Validate` to activate the
    mandate.

::: warning

A valid IBAN must be defined in the `Account Number` field of the `bank journal
` used to receive
`SDD (SEPA Direct Debit)` payments for
the mandate.
::::

::: tip

\- To print the mandate form after the mandate has been validated, click
the `fa-cog` (`gear`) icon, then select `Mandate form`. - The `SDD Scheme`
depends on the type of customer: Select `CORE` for B2C customers and `B2B` for B2B customers. -
`SDD (SEPA Direct Debit)` mandates are
created automatically for `online payments made with SDD
`.
::::

Once an `SDD (SEPA Direct Debit)` mandate
is active, subsequent `SDD (SEPA Direct Debit)` payments can be generated via Odoo and
`uploaded to your online banking interface `. Customers with an active
`SDD (SEPA Direct Debit)` mandate can
also use this payment method for `online purchases
`.

### Closing or revoking a mandate 

`SDD (SEPA Direct Debit)` mandates are
closed automatically after their `End Date`. If this field is left empty, the mandate remains
active until it is closed or revoked. To close or revoke a mandate, go
to
`Accounting ‣ Customers ‣ Direct Debit Mandates`, select the relevant mandate, and click
`Close` or `Revoke`.

**Closing** a mandate updates the mandate\'s end day to the current day.
Invoices issued after the present day will not be processed with an
`SDD (SEPA Direct Debit)` payment.
**Revoking** a mandate disables the mandate immediately. No
`SDD (SEPA Direct Debit)` payment can be
registered anymore, regardless of the invoice\'s date. However, payments
that have already been registered are still included in the next `SDD
XML file `.

:::: warning

\- Mandates are automatically closed 36 months after the date of the
last collection. - Closed or revoked mandates cannot be reactivated.
::::

## Processing `SDD (SEPA Direct Debit)` payments 

All registered `SDD (SEPA Direct Debit)`
payments can be processed at once by uploading an XML file containing a
batch of all posted `SDD (SEPA Direct Debit)` payments to your online banking interface. To do so, follow
these steps:

1.  `Create a batch payment ` and include the
    `SDD (SEPA Direct Debit)` payments to
    collect.

    ::: tip
    : tip

\- To view the payments and invoices linked to a specific
`SDD (SEPA Direct Debit)` mandate, click
the `Collections` and
`Invoices Paid` smart button on the
`Direct Debit
Mandate ` form. - Click `Re-generate Export file` to regenerate the XML file.
::::


## `SDD (SEPA Direct Debit)` rejections 

`SDD (SEPA Direct Debit)` rejections can
occur for several reasons, the most common being insufficient funds in
the customer\'s account. With
`SDD (SEPA Direct Debit)`, the
recipient\'s account is credited before the funds are actually debited
from the customer\'s account. As a result, if an
`SDD (SEPA Direct Debit)` payment is
later rejected, the bank automatically withdraws the amount of that
payment from the recipient\'s account, and a new transaction for a
negative amount is created to reflect the
`SDD (SEPA Direct Debit)` rejection.

`SDD (SEPA Direct Debit)` rejections are
handled differently depending on whether `outstanding accounts
`
are configured or not for the
`SDD (SEPA Direct Debit)` payment method.

::: tip

The following procedures assume that the incoming
`SDD (SEPA Direct Debit)` payment\'s bank
transaction has already been
`reconciled ` with the payments or invoices.
::::

::::: tabs
::: tab
Without outstanding accounts

If no
`outstanding accounts ` are configured for the
`SDD (SEPA Direct Debit)` payment method,
no journal entry is created. In this case, you must cancel and
unreconcile the payment.

1.  Access the invoice linked to the rejected
    `SDD (SEPA Direct Debit)` payment.
2.  Click the `Payments` smart button
    to access the payment associated with the invoice.
3.  Click `Reset to draft`, then
    `Cancel`.
4.  Go back to the invoice and click the
    `fa-info-circle`
    `(information)` icon in the
    footer of the `Invoice Lines`
    tab, then click `Unreconcile`.
5.  `Access the bank journal's reconciliation view ` and
    `reconcile ` the transaction created for the
    `SDD (SEPA Direct Debit)` rejection
    with the debit (negative journal item) to the account receivable on
    the incoming bank transaction.
:::

::: tab
Using outstanding accounts

If an
`outstanding account ` is set on the `SDD (SEPA Direct Debit)` payment method, `SDD (SEPA Direct Debit)` payments create journal entries. If an
`SDD (SEPA Direct Debit)` payment is
rejected, you must reverse the journal entry associated with the
rejected payment and reconcile the reversal of the journal entry with
the transaction for the `SDD (SEPA Direct Debit)` rejection. To do so, follow these steps:

1.  Access the invoice linked to the rejected
    `SDD (SEPA Direct Debit)` payment.
2.  Click the `fa-info-circle`
    `(information)` icon in the
    footer of the `Invoice Lines`
    tab, then click `View` to access
    the payment associated with the invoice.
3.  Click the `Journal entry` smart
    button to access the related journal entry.
4.  Click `Reverse entry`, optionally
    edit the fields in the popup, then click `Reverse`. A reversal entry is created with a
    `Reference` mentioning the
    initial journal entry. As a result, the invoice is marked as
    `Not paid`.
5.  `Access the bank journal's reconciliation view ` and
    `reconcile ` the transaction created for the
    `SDD (SEPA Direct Debit)` rejection
    with the reversal of the entry related to the payment.
:::
:::::
